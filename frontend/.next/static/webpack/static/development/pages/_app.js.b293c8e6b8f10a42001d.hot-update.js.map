{"version":3,"file":"static/webpack/static/development/pages/_app.js.b293c8e6b8f10a42001d.hot-update.js","sources":["webpack:///./components/RemoveFromCart.js"],"sourcesContent":["import React from 'react'\nimport { Mutation } from 'react-apollo'\nimport PropTypes from 'prop-types'\nimport gql from 'graphql-tag'\nimport { CURRENT_USER_QUERY } from './User'\n\nconst REMOVE_FROM_CART_MUTATION = gql`\n  mutation removeFromCart($id: ID!) {\n    removeFromCart(id: $id) {\n      id\n    }\n  }\n`\n\nclass RemoveFromCart extends React.Component {\n  static propTypes = {\n    id: PropTypes.string.isRequired\n  }\n\n  update = (cache, payload) => {\n    const data = cache.readQuery({ query: CURRENT_USER_QUERY })\n    const cartProductId = payload.data.removeFromCart.id\n    data.me.cart = data.me.cart.filter(\n      cartProduct => cartProduct.id !== cartProductId\n    )\n    cache.writeQuery({ query: CURRENT_USER_QUERY, data })\n  }\n\n  render() {\n    return (\n      <Mutation\n        mutation={REMOVE_FROM_CART_MUTATION}\n        variables={{ id: this.props.id }}\n        update={this.update}\n        optimisticResponse={{\n          __typename: 'Mutation',\n          removeFromCart: {\n            __typename: 'CartProduct',\n            id: this.props.id\n          }\n        }}\n      >\n        {(removeFromCart, { loading, error }) => (\n          <button\n            onClick={() => {\n              removeFromCart().catch(err => alert(err.message))\n            }}\n            className=\"cart-item-remove\"\n            disabled={loading}\n            title=\"Remove Product\"\n          >\n            &times;\n          </button>\n        )}\n      </Mutation>\n    )\n  }\n}\n\nexport default RemoveFromCart\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAOA;;;;;;;;;;;;;;;;;;AAKA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAcA;;;;AA1CA;AACA;AADA;AAEA;AADA;AACA;AA2CA;;;;A","sourceRoot":""}